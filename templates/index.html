<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èªèªæ€åŸ¹å•è¯å¡ ğŸ“š</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header {
            background: white;
            border-radius: 20px;
            padding: 25px 30px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .header h1 {
            color: #667eea;
            font-size: 28px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .header {
                padding: 15px 20px;
                margin-bottom: 15px;
            }
            
            .header h1 {
                font-size: 22px;
                width: 100%;
                margin-bottom: 15px;
            }
            
            .stats {
                width: 100%;
                justify-content: space-between;
            }
            
            .stat-card {
                flex: 1;
                min-width: 0;
                padding: 12px 8px;
            }
            
            .stat-card h3 {
                font-size: 20px;
            }
            
            .stat-card p {
                font-size: 11px;
            }
        }
        
        .stats {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 20px;
            border-radius: 12px;
            text-align: center;
            min-width: 100px;
            transition: all 0.3s;
        }
        
        .stat-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .stat-card:active {
            transform: translateY(0);
        }
        
        .stat-card h3 {
            font-size: 24px;
            margin-bottom: 5px;
        }
        
        .stat-card p {
            font-size: 12px;
            opacity: 0.9;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }
        
        @media (max-width: 768px) {
            .btn {
                padding: 12px 20px;
                font-size: 15px;
                min-height: 44px;
            }
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }
        
        .btn-secondary {
            background: #f0f0f0;
            color: #333;
        }
        
        .btn-secondary:hover {
            background: #e0e0e0;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .card {
                padding: 20px;
                border-radius: 15px;
            }
            
            .card h2 {
                font-size: 20px;
                margin-bottom: 15px;
            }
        }
        
        .card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .card h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 22px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 500;
        }
        
        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 14px;
            font-family: inherit;
            transition: all 0.3s;
        }
        
        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }
        
        @media (max-width: 768px) {
            .form-group input,
            .form-group textarea {
                padding: 14px;
                font-size: 16px;
                min-height: 44px;
            }
            
            .form-group textarea {
                min-height: 100px;
            }
            
            .form-group label {
                font-size: 15px;
                margin-bottom: 10px;
            }
            
            .form-group > div {
                flex-direction: column;
            }
            
            .form-group > div > button {
                width: 100%;
                margin-top: 8px;
            }
        }
        
        .word-card {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }
        
        .word-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .word-card:active {
            transform: scale(0.98);
        }
        
        .word-card.flipped {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
        }
        
        .word-card.mastered {
            opacity: 0.6;
        }
        
        .word-front {
            text-align: center;
        }
        
        .word-front h3 {
            font-size: 36px;
            color: #333;
            margin-bottom: 15px;
            font-weight: 700;
        }
        
        @media (max-width: 768px) {
            .word-card {
                padding: 25px 20px;
                min-height: 250px;
                margin-bottom: 20px;
            }
            
            .word-front h3 {
                font-size: 32px;
                margin-bottom: 20px;
            }
            
            .word-back h4 {
                font-size: 22px;
            }
            
            .word-back p {
                font-size: 15px;
                line-height: 1.8;
            }
        }
        
        .word-back {
            display: none;
        }
        
        .word-card.flipped .word-front {
            display: none;
        }
        
        .word-card.flipped .word-back {
            display: block;
        }
        
        .word-back h4 {
            font-size: 24px;
            color: #333;
            margin-bottom: 10px;
        }
        
        .word-back p {
            font-size: 16px;
            color: #555;
            margin-bottom: 8px;
            line-height: 1.6;
        }
        
        .word-back .example {
            font-style: italic;
            color: #777;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid rgba(0,0,0,0.1);
        }
        
        .card-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            justify-content: center;
        }
        
        .btn-small {
            padding: 8px 15px;
            font-size: 12px;
        }
        
        @media (max-width: 768px) {
            .btn-small {
                padding: 10px 16px;
                font-size: 13px;
                min-height: 44px;
                flex: 1;
            }
            
            .review-controls {
                flex-wrap: wrap;
                gap: 8px;
            }
            
            .review-controls .btn {
                flex: 1;
                min-width: 0;
            }
        }
        
        .word-list {
            max-height: 500px;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        .word-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s;
        }
        
        .word-item:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }
        
        @media (max-width: 768px) {
            .word-list {
                max-height: 400px;
            }
            
            .word-item {
                padding: 12px;
                flex-direction: column;
                align-items: flex-start;
            }
            
            .word-item-actions {
                width: 100%;
                margin-top: 10px;
                justify-content: flex-end;
            }
            
            .word-item-actions .btn {
                min-height: 40px;
            }
        }
        
        .word-item-info {
            flex: 1;
        }
        
        .word-item-info h4 {
            color: #333;
            margin-bottom: 5px;
        }
        
        .word-item-info p {
            color: #666;
            font-size: 14px;
        }
        
        .word-item-actions {
            display: flex;
            gap: 5px;
        }
        
        .btn-danger {
            background: #ff6b6b;
            color: white;
        }
        
        .btn-danger:hover {
            background: #ee5a5a;
        }
        
        .btn-success {
            background: #51cf66;
            color: white;
        }
        
        .btn-success:hover {
            background: #40c057;
        }
        
        .empty-state {
            text-align: center;
            padding: 40px;
            color: #999;
        }
        
        .empty-state .emoji {
            font-size: 64px;
            margin-bottom: 15px;
        }
        
        .flip-hint {
            text-align: center;
            color: #999;
            font-size: 12px;
            margin-top: 10px;
        }
        
        .review-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }
        
        .footer {
            margin-top: 40px;
            padding: 30px 20px;
            text-align: center;
            background: white;
            border-radius: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        @media (max-width: 768px) {
            .footer {
                margin-top: 30px;
                padding: 25px 15px;
                border-radius: 15px;
            }
            
            .footer-text,
            .footer-subtext {
                font-size: 14px;
            }
            
            .footer-year {
                font-size: 13px;
            }
        }
        
        .footer-content {
            max-width: 600px;
            margin: 0 auto;
        }
        
        .footer-heart {
            font-size: 32px;
            margin-bottom: 15px;
            animation: heartbeat 1.5s ease-in-out infinite;
        }
        
        @keyframes heartbeat {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.1);
            }
        }
        
        .footer-text {
            font-size: 16px;
            color: #666;
            margin-bottom: 8px;
            line-height: 1.6;
        }
        
        .footer-subtext {
            font-size: 15px;
            color: #888;
            margin-bottom: 10px;
            line-height: 1.6;
        }
        
        .footer-year {
            font-size: 14px;
            color: #999;
            margin-top: 10px;
        }
        
        .footer-name {
            color: #667eea;
            font-weight: 600;
            font-style: italic;
        }
        
        .footer-name:hover {
            color: #764ba2;
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“š èªèªæ€åŸ¹å•è¯å¡</h1>
            <div style="display: flex; gap: 15px; align-items: center; flex-wrap: wrap;">
                <div class="stats">
                    <div class="stat-card" onclick="startReview('all')" style="cursor: pointer;" title="ç‚¹å‡»å¼€å§‹å¤ä¹ æ‰€æœ‰å•è¯">
                        <h3 id="statTotal">0</h3>
                        <p>æ€»å•è¯</p>
                    </div>
                    <div class="stat-card" onclick="startReview('mastered')" style="cursor: pointer;" title="ç‚¹å‡»å¤ä¹ å·²æŒæ¡çš„å•è¯">
                        <h3 id="statMastered">0</h3>
                        <p>å·²æŒæ¡</p>
                    </div>
                    <div class="stat-card" onclick="startReview('to_review')" style="cursor: pointer;" title="ç‚¹å‡»å¤ä¹ ä¸ç†Ÿè¯">
                        <h3 id="statToReview">0</h3>
                        <p>ä¸ç†Ÿè¯</p>
                    </div>
                </div>
                <a href="/logout" class="btn btn-secondary">é€€å‡º</a>
            </div>
        </div>
        
        <div class="main-content">
            <div class="card">
                <h2>â• æ·»åŠ æ–°å•è¯</h2>
                <form id="addWordForm">
                    <div class="form-group">
                        <label for="word">å•è¯</label>
                        <div style="display: flex; gap: 5px; flex-wrap: wrap;">
                            <input type="text" id="word" name="word" required placeholder="è¾“å…¥è‹±æ–‡å•è¯..." style="flex: 1; min-width: 0;">
                            <button type="button" class="btn btn-secondary" onclick="autoFillWord()" style="white-space: nowrap; min-width: fit-content;">ğŸ” è‡ªåŠ¨è·å–</button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="meaning">é‡Šä¹‰</label>
                        <textarea id="meaning" name="meaning" required placeholder="è¾“å…¥å•è¯çš„é‡Šä¹‰ï¼ˆå¯è‡ªåŠ¨è·å–ï¼‰..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="example">ä¾‹å¥ï¼ˆå¯é€‰ï¼‰</label>
                        <textarea id="example" name="example" placeholder="è¾“å…¥ä¾‹å¥ï¼ˆå¯è‡ªåŠ¨è·å–ï¼‰..."></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;">æ·»åŠ å•è¯ âœ¨</button>
                </form>
            </div>
            
            <div class="card">
                <h2>ğŸƒ å•è¯å¡å¤ä¹  <span id="reviewMode" style="font-size: 14px; color: #999; font-weight: normal;"></span></h2>
                <div id="reviewCard" class="word-card" style="display: none;">
                    <div class="word-front">
                        <h3 id="cardWord">å•è¯</h3>
                        <p class="flip-hint">ç‚¹å‡»å¡ç‰‡æŸ¥çœ‹é‡Šä¹‰</p>
                    </div>
                    <div class="word-back">
                        <h4 id="cardWordBack">å•è¯</h4>
                        <p id="cardMeaning">é‡Šä¹‰</p>
                        <p class="example" id="cardExample"></p>
                    </div>
                </div>
                <div id="reviewControls" class="review-controls" style="display: none;">
                    <button class="btn btn-danger btn-small" onclick="markAsDifficult()">ğŸ˜“ è¿˜éœ€åŠªåŠ›</button>
                    <button class="btn btn-success btn-small" onclick="markAsMastered()">âœ… å·²æŒæ¡</button>
                    <button class="btn btn-secondary btn-small" onclick="nextCard()">ä¸‹ä¸€ä¸ª â†’</button>
                </div>
                <div id="reviewEmpty" class="empty-state">
                    <div class="emoji">ğŸ‰</div>
                    <p>æ‰€æœ‰å•è¯éƒ½å·²å¤ä¹ å®Œæ¯•ï¼</p>
                    <p style="font-size: 12px; margin-top: 10px;">æˆ–è€…æ·»åŠ ä¸€äº›æ–°å•è¯å¼€å§‹å­¦ä¹ å§ï½</p>
                </div>
            </div>
        </div>
        
        <div class="card" style="margin-top: 20px;">
            <h2>ğŸ“ æ‰€æœ‰å•è¯</h2>
            <div id="wordList" class="word-list">
                <div class="empty-state">
                    <div class="emoji">ğŸ“–</div>
                    <p>è¿˜æ²¡æœ‰æ·»åŠ å•è¯ï¼Œå¿«æ·»åŠ ç¬¬ä¸€ä¸ªå§ï¼</p>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <div class="footer-content">
                <div class="footer-heart">ğŸ’</div>
                <p class="footer-text">
                    Designed and implemented by <span class="footer-name">Guan Qiang</span>
                </p>
                <p class="footer-subtext">
                    as a Christmas gift for <span class="footer-name">Estella</span>
                </p>
                <p class="footer-year">2025 âœ¨</p>
            </div>
        </div>
    </div>
    
    <script>
        let allWords = [];
        let currentReviewIndex = 0;
        let reviewWords = [];
        let currentReviewMode = 'to_review'; // 'all', 'mastered', 'to_review'
        
        // åŠ è½½æ•°æ®
        async function loadData() {
            try {
                const [wordsRes, statsRes] = await Promise.all([
                    fetch('/api/words'),
                    fetch('/api/stats')
                ]);
                
                allWords = await wordsRes.json();
                const stats = await statsRes.json();
                
                // æ›´æ–°ç»Ÿè®¡
                document.getElementById('statTotal').textContent = stats.total;
                document.getElementById('statMastered').textContent = stats.mastered;
                document.getElementById('statToReview').textContent = stats.to_review;
                
                // æ›´æ–°å•è¯åˆ—è¡¨
                updateWordList();
                
                // æ ¹æ®å½“å‰æ¨¡å¼æ›´æ–°å¤ä¹ å¡ç‰‡
                updateReviewWordsByMode();
                updateReviewCard();
            } catch (error) {
                console.error('åŠ è½½æ•°æ®å¤±è´¥:', error);
            }
        }
        
        // æ ¹æ®æ¨¡å¼æ›´æ–°å¤ä¹ å•è¯åˆ—è¡¨
        function updateReviewWordsByMode() {
            if (currentReviewMode === 'all') {
                reviewWords = [...allWords];
            } else if (currentReviewMode === 'mastered') {
                reviewWords = allWords.filter(w => w.mastered);
            } else { // to_review
                reviewWords = allWords.filter(w => !w.mastered);
            }
            currentReviewIndex = 0;
        }
        
        // å¼€å§‹å¤ä¹ 
        function startReview(mode) {
            currentReviewMode = mode;
            updateReviewWordsByMode();
            updateReviewCard();
            
            // æ›´æ–°æ¨¡å¼æ˜¾ç¤º
            const modeNames = {
                'all': 'å…¨éƒ¨å•è¯',
                'mastered': 'å·²æŒæ¡',
                'to_review': 'ä¸ç†Ÿè¯'
            };
            document.getElementById('reviewMode').textContent = `(${modeNames[mode]})`;
        }
        
        // æ›´æ–°å•è¯åˆ—è¡¨
        function updateWordList() {
            const wordList = document.getElementById('wordList');
            
            if (allWords.length === 0) {
                wordList.innerHTML = `
                    <div class="empty-state">
                        <div class="emoji">ğŸ“–</div>
                        <p>è¿˜æ²¡æœ‰æ·»åŠ å•è¯ï¼Œå¿«æ·»åŠ ç¬¬ä¸€ä¸ªå§ï¼</p>
                    </div>
                `;
                return;
            }
            
            wordList.innerHTML = allWords.map(word => `
                <div class="word-item">
                    <div class="word-item-info">
                        <h4>${word.word} ${word.mastered ? 'âœ…' : ''}</h4>
                        <p>${word.meaning}</p>
                        ${word.example ? `<p style="font-style: italic; color: #999; font-size: 12px;">${word.example}</p>` : ''}
                    </div>
                    <div class="word-item-actions">
                        <button class="btn btn-danger btn-small" onclick="deleteWord(${word.id})">åˆ é™¤</button>
                    </div>
                </div>
            `).join('');
        }
        
        // æ›´æ–°å¤ä¹ å¡ç‰‡
        function updateReviewCard() {
            const reviewCard = document.getElementById('reviewCard');
            const reviewControls = document.getElementById('reviewControls');
            const reviewEmpty = document.getElementById('reviewEmpty');
            
            if (reviewWords.length === 0) {
                reviewCard.style.display = 'none';
                reviewControls.style.display = 'none';
                reviewEmpty.style.display = 'block';
                return;
            }
            
            reviewEmpty.style.display = 'none';
            reviewCard.style.display = 'flex';
            reviewControls.style.display = 'flex';
            
            const word = reviewWords[currentReviewIndex];
            document.getElementById('cardWord').textContent = word.word;
            document.getElementById('cardWordBack').textContent = word.word;
            document.getElementById('cardMeaning').textContent = word.meaning;
            document.getElementById('cardExample').textContent = word.example || '';
            document.getElementById('cardExample').style.display = word.example ? 'block' : 'none';
            
            reviewCard.classList.remove('flipped');
        }
        
        // è‡ªåŠ¨è·å–å•è¯é‡Šä¹‰
        async function autoFillWord() {
            const wordInput = document.getElementById('word');
            const meaningInput = document.getElementById('meaning');
            const exampleInput = document.getElementById('example');
            const word = wordInput.value.trim();
            
            if (!word) {
                alert('è¯·å…ˆè¾“å…¥å•è¯');
                return;
            }
            
            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            const originalText = wordInput.value;
            wordInput.disabled = true;
            wordInput.value = 'æ­£åœ¨è·å–...';
            
            try {
                const response = await fetch(`/api/lookup?word=${encodeURIComponent(word)}`);
                const data = await response.json();
                
                if (data.success) {
                    meaningInput.value = data.meaning || '';
                    exampleInput.value = data.example || '';
                    
                    let message = 'é‡Šä¹‰å·²è‡ªåŠ¨å¡«å……ï¼âœ¨';
                    if (data.example) {
                        message += '\nä¾‹å¥ä¹Ÿå·²è‡ªåŠ¨å¡«å……ï¼';
                    } else if (data.meaning) {
                        message += '\nï¼ˆæœªæ‰¾åˆ°ä¾‹å¥ï¼Œå¯æ‰‹åŠ¨æ·»åŠ ï¼‰';
                    }
                    alert(message);
                } else {
                    alert(data.message || 'æœªæ‰¾åˆ°è¯¥å•è¯çš„é‡Šä¹‰ï¼Œè¯·æ‰‹åŠ¨è¾“å…¥');
                }
            } catch (error) {
                alert('è·å–å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–æ‰‹åŠ¨è¾“å…¥');
            } finally {
                wordInput.disabled = false;
                wordInput.value = originalText;
            }
        }
        
        // æ·»åŠ å•è¯
        document.getElementById('addWordForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const word = document.getElementById('word').value.trim();
            const meaning = document.getElementById('meaning').value.trim();
            const example = document.getElementById('example').value.trim();
            
            if (!word || !meaning) {
                alert('è¯·è‡³å°‘è¾“å…¥å•è¯å’Œé‡Šä¹‰');
                return;
            }
            
            try {
                const response = await fetch('/api/words', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ word, meaning, example })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    document.getElementById('addWordForm').reset();
                    loadData();
                } else {
                    alert('æ·»åŠ å¤±è´¥ï¼š' + (data.message || 'æœªçŸ¥é”™è¯¯'));
                }
            } catch (error) {
                alert('ç½‘ç»œé”™è¯¯ï¼Œè¯·é‡è¯•');
            }
        });
        
        // åˆ é™¤å•è¯
        async function deleteWord(wordId) {
            if (!confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå•è¯å—ï¼Ÿ')) return;
            
            try {
                const response = await fetch(`/api/words/${wordId}`, {
                    method: 'DELETE'
                });
                
                const data = await response.json();
                if (data.success) {
                    loadData();
                }
            } catch (error) {
                alert('åˆ é™¤å¤±è´¥');
            }
        }
        
        // ç¿»è½¬å¡ç‰‡
        document.getElementById('reviewCard').addEventListener('click', function() {
            if (!this.classList.contains('flipped')) {
                this.classList.add('flipped');
            }
        });
        
        // æ ‡è®°ä¸ºå·²æŒæ¡
        async function markAsMastered() {
            const word = reviewWords[currentReviewIndex];
            await reviewWord(word.id, true);
        }
        
        // æ ‡è®°ä¸ºè¿˜éœ€åŠªåŠ›
        async function markAsDifficult() {
            const word = reviewWords[currentReviewIndex];
            await reviewWord(word.id, false);
        }
        
        // ä¸‹ä¸€ä¸ªå¡ç‰‡
        function nextCard() {
            currentReviewIndex = (currentReviewIndex + 1) % reviewWords.length;
            updateReviewCard();
        }
        
        // å¤ä¹ å•è¯
        async function reviewWord(wordId, mastered) {
            try {
                const response = await fetch(`/api/words/${wordId}/review`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ mastered })
                });
                
                const data = await response.json();
                if (data.success) {
                    // é‡æ–°åŠ è½½æ•°æ®
                    await loadData();
                    // æ ¹æ®å½“å‰æ¨¡å¼é‡æ–°æ›´æ–°å¤ä¹ åˆ—è¡¨
                    updateReviewWordsByMode();
                    updateReviewCard();
                }
            } catch (error) {
                alert('æ“ä½œå¤±è´¥');
            }
        }
        
        // åˆå§‹åŒ–
        loadData();
        // é»˜è®¤æ˜¾ç¤ºä¸ç†Ÿè¯æ¨¡å¼
        document.getElementById('reviewMode').textContent = '(ä¸ç†Ÿè¯)';
    </script>
</body>
</html>

